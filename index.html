<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Harlow Community Services</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <h1>Harlow Community Services</h1>
    </div>
    <div class="top-actions">
      <button id="btnHelp" class="btn btn-ghost">Help</button>
      <button id="btnReset" class="btn btn-ghost">Reset</button>
    </div>
  </header>

  <main class="layout">
    <section class="panel panel-left" aria-label="Search and browse">
      <div class="search-card">
        <label class="label" for="q">Patient presentation / what are they looking for?</label>
        <div class="search-row">
          <input id="q" type="search" placeholder="e.g., anxiety and panic attacks, struggling with alcohol, housing advice, carer support…" autocomplete="off" style="width:100%" />
        </div>
        <div class="filters">
          <div class="chip-group" id="quickChips" aria-label="Quick chips"></div>
          <div class="filter-row">
            <label class="label" for="categoryFilter">Category</label>
            <select id="categoryFilter"></select>
          </div>
          <div class="filter-row">
            <label class="label" for="costFilter">Cost</label>
            <select id="costFilter">
              <option value="">Any</option>
              <option value="Free">Free</option>
              <option value="Means Tested">Means Tested</option>
              <option value="Charity Fee">Charity Fee</option>
              <option value="Paid">Paid</option>
              <option value="Adults £2, Kids Free">Adults £2, Kids Free</option>
              <option value="Mix">Mix</option>
            </select>
          </div>
        </div>
      </div>

      <div class="browse-card">
        <div class="browse-header">
          <h2>Browse categories</h2>
          <button id="btnBrowseAll" class="btn btn-ghost">Show all services</button>
        </div>
        <div id="categoryGrid" class="category-grid" aria-label="Categories"></div>
      </div>

      <div class="results-card">
        <div class="results-header">
          <h2>Recommended services</h2>
          <div class="results-meta" id="resultsMeta"></div>
        </div>
        <div id="results" class="results" aria-live="polite"></div>
      </div>
    </section>

    <aside class="panel panel-right" aria-label="Selected services">
      <div class="selected-card">
        <div class="selected-header">
          <h2>Selected for patient</h2>
          <div class="toggle">
            <span class="toggle-label">Final output:</span>
            <button id="toggleLinks" class="btn btn-toggle" aria-pressed="true">Hyperlink</button>
            <button id="togglePlain" class="btn btn-toggle" aria-pressed="false">Plain text</button>
          </div>
        </div>

        <div id="selected" class="selected"></div>

        <div class="export-actions">
          <button id="btnCopy" class="btn btn-primary">Copy to clipboard</button>
          <button id="btnPrint" class="btn btn-ghost">Print</button>
          <button id="btnPdf" class="btn btn-ghost">Download PDF</button>
        </div>

        <div class="editor">
          <label class="label" for="patientNote">Optional note to include</label>
          <textarea id="patientNote" rows="3" placeholder="Add any patient-specific notes…"></textarea>
        </div>

        <details class="final-preview">
          <summary>Preview final message</summary>
          <div id="finalPreview" class="preview"></div>
        </details>
      </div>

      <div class="footer-note">
        <p class="small">Colour theme inspired by UK healthcare palettes. No logos or organisational branding included.</p>
      </div>
    </aside>
  </main>

  <!-- Help modal -->
  <dialog id="helpDialog" class="modal">
    <h3>How to use</h3>
    <ul>
      <li>Type a patient’s needs in plain language. Results will appear automatically as you type.</li>
      <li>Open a service card to view the full description (as written in the source document).</li>
      <li>Use <b>Add</b> to include services in the patient output. You can edit text before sharing.</li>
      <li>Use the <b>Hyperlink / Plain text</b> toggle to control how links appear in the final output.</li>
    </ul>
    <div class="modal-actions">
      <button class="btn btn-primary" id="btnCloseHelp">Close</button>
    </div>
  </dialog>

  <!-- Libraries (client-side only) -->
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>

  <script src="app.js"></script>
</body>
</html>
